# uni-app 项目编译和运行指南

## ⚠️ 重要提示

**uni-app 项目不能直接导入微信开发者工具！**

需要先编译成微信小程序代码，然后导入编译后的 `dist/dev/mp-weixin` 目录。

## 方法一：使用 HBuilderX（推荐）

1. **下载安装 HBuilderX**
   - 访问：https://www.dcloud.io/hbuilderx.html
   - 下载并安装 HBuilderX

2. **导入项目**
   - 打开 HBuilderX
   - 文件 → 导入 → 从本地目录导入
   - 选择 `miniapp-frontend-uniapp` 目录

3. **配置 manifest.json**
   - 打开 `manifest.json`
   - 在 `mp-weixin` → `appid` 中填写你的微信小程序 AppID
   - 如果没有 AppID，可以留空（仅用于开发测试）

4. **编译运行**
   - 点击菜单：运行 → 运行到小程序模拟器 → 微信开发者工具
   - 或者点击工具栏的运行按钮
   - HBuilderX 会自动编译并打开微信开发者工具

5. **导入编译后的代码**
   - 编译完成后，会在项目根目录生成 `unpackage/dist/dev/mp-weixin` 目录
   - 打开微信开发者工具
   - 选择"导入项目"，路径选择 `unpackage/dist/dev/mp-weixin`

## 方法二：使用命令行编译

1. **安装依赖**
   ```bash
   cd miniapp-frontend-uniapp
   npm install
   ```

2. **安装 uni-app CLI（如果还没有）**
   ```bash
   npm install -g @dcloudio/uni-cli
   ```

3. **编译到微信小程序**
   ```bash
   npm run dev:mp-weixin
   ```

4. **导入编译后的代码**
   - 编译完成后，会在项目根目录生成 `dist/dev/mp-weixin` 目录
   - 打开微信开发者工具
   - 选择"导入项目"，路径选择 `dist/dev/mp-weixin`
   - 填写 AppID（开发测试可以留空）

## 常见问题

### 1. 编译报错：找不到模块
**解决**：确保已安装所有依赖
```bash
npm install
```

### 2. 微信开发者工具报错：appid 不能为空
**解决**：
- 开发测试：在微信开发者工具中选择"测试号"
- 正式发布：在 `manifest.json` 中填写真实的 AppID

### 3. 页面显示空白
**解决**：
- 检查控制台错误信息
- 确认后端服务已启动（http://localhost:8081）
- 检查 `App.vue` 中的 `baseURL` 配置是否正确

### 4. 网络请求失败
**解决**：
- 确认后端服务地址（默认：http://localhost:8081）
- 在微信开发者工具中设置：详情 → 本地设置 → 不校验合法域名

## 项目配置说明

### baseURL 配置
在 `App.vue` 中修改：
```javascript
globalData: {
  baseURL: 'http://localhost:8081',  // 修改为你的后端地址
  // ...
}
```

### AppID 配置
在 `manifest.json` 中修改：
```json
{
  "mp-weixin": {
    "appid": "你的AppID",  // 填写你的微信小程序 AppID
    // ...
  }
}
```

## 开发建议

1. **使用 HBuilderX 开发**：提供实时预览和热重载
2. **调试**：使用微信开发者工具的调试工具
3. **真机测试**：编译后使用微信开发者工具的"预览"功能

## 文件结构说明

```
miniapp-frontend-uniapp/
├── pages/              # 页面文件（.vue）
├── utils/              # 工具函数
├── manifest.json       # 应用配置
├── pages.json          # 页面路由配置
├── App.vue            # 应用根组件
├── main.js            # 入口文件
└── package.json       # 依赖配置

编译后生成：
└── unpackage/dist/dev/mp-weixin/  # 微信小程序代码（导入这个目录）
```


