<view class="container">
  <!-- åŠ è½½ä¸­çŠ¶æ€ -->
  <view wx:if="{{loading}}" class="loading-container">
    <text>åŠ è½½ä¸­...</text>
  </view>
  
  <!-- å•†å“å†…å®¹ï¼ˆå§‹ç»ˆæ˜¾ç¤ºï¼Œå³ä½¿åŠ è½½å¤±è´¥ä¹Ÿæ˜¾ç¤ºé»˜è®¤å†…å®¹ï¼‰ -->
  <!-- å•†å“å›¾ç‰‡åŒºåŸŸ -->
  <view class="image-section">
    <!-- å¤šå¼ å›¾ç‰‡è½®æ’­ -->
    <swiper wx:if="{{imageList.length > 0}}" class="image-swiper" indicator-dots="{{imageList.length > 1}}" indicator-color="rgba(255,255,255,0.5)" indicator-active-color="#fff" autoplay="{{false}}" circular="{{false}}" bindchange="onSwiperChange">
      <swiper-item wx:for="{{imageList}}" wx:key="index">
        <image mode="aspectFill" src="{{item}}" class="main-image" bindtap="previewImage" data-index="{{index}}"/>
      </swiper-item>
    </swiper>
    <!-- å•å¼ å›¾ç‰‡æˆ–é»˜è®¤å›¾ç‰‡ -->
    <image wx:elif="{{item.coverUrl}}" mode="aspectFill" src="{{item.coverUrl}}" class="main-image" bindtap="previewImage" data-index="0"/>
    <image wx:else mode="aspectFill" src="https://img.yzcdn.cn/vant/cat.jpeg" class="main-image"/>
    <view wx:if="{{!isMyProduct}}" class="favorite-btn {{isFavorited ? 'favorited' : ''}}" catchtap="toggleFavorite">
      <text class="favorite-icon">{{isFavorited ? 'â¤ï¸' : 'ğŸ¤'}}</text>
    </view>
    <!-- å›¾ç‰‡æ•°é‡æŒ‡ç¤ºå™¨ -->
    <view wx:if="{{imageList.length > 1}}" class="image-indicator">{{currentImageIndex + 1}}/{{imageList.length}}</view>
  </view>

  <!-- ä»·æ ¼å’Œæ ‡é¢˜ -->
  <view class="price-section">
    <view class="price">ï¿¥<text class="price-main">{{item.price || 0}}</text></view>
    <view class="title">{{item.name || 'å•†å“åç§°'}}</view>
  </view>

  <!-- å•†å“ä¿¡æ¯å¡ç‰‡ -->
  <view class="info-card">
    <view class="info-row" wx:if="{{item.description}}">
      <view class="info-label">å•†å“æè¿°</view>
      <view class="info-value">{{item.description}}</view>
    </view>
    <view class="info-row">
      <view class="info-label">åˆ†ç±»</view>
      <view class="info-value">{{categoryName || 'æœªåˆ†ç±»'}}</view>
    </view>
    <view class="info-row">
      <view class="info-label">å‘å¸ƒæ—¶é—´</view>
      <view class="info-value">{{item.createdAt || 'åˆšåˆš'}}</view>
    </view>
    <view class="info-row">
      <view class="info-label">çŠ¶æ€</view>
      <view class="status-badge {{item.status === 'PUBLISHED' ? 'online' : 'offline'}}">
        {{item.status === 'PUBLISHED' ? 'åœ¨å”®' : 'å·²ä¸‹æ¶'}}
      </view>
    </view>
  </view>

  <!-- å–å®¶ä¿¡æ¯å¡ç‰‡ -->
  <view class="seller-card">
    <view class="seller-header">
      <image class="seller-avatar" src="{{sellerInfo.avatarUrl || 'https://img.yzcdn.cn/vant/cat.jpeg'}}" mode="aspectFill"/>
      <view class="seller-info">
        <view class="seller-name">{{sellerInfo.nickname || 'å–å®¶'}}</view>
        <view class="seller-tag">ä¸ªäººå–å®¶</view>
      </view>
      <view wx:if="{{!isMyProduct}}" class="chat-btn-mini" catchtap="onChat">
        <text class="chat-icon">ğŸ’¬</text>
        <text>è”ç³»</text>
      </view>
      <view wx:if="{{isMyProduct}}" class="edit-btn-mini" catchtap="goEdit">
        <text class="edit-icon">âœï¸</text>
        <text>ç¼–è¾‘</text>
      </view>
    </view>
    <!-- å–å®¶è”ç³»æ–¹å¼ -->
    <view wx:if="{{sellerContact}}" class="seller-contact">
      <view wx:if="{{sellerContact.wechatId}}" class="contact-item">
        <text class="contact-label">å¾®ä¿¡ï¼š</text>
        <text class="contact-value">{{sellerContact.wechatId}}</text>
        <text class="copy-btn" bindtap="copyContact" data-type="wechat" data-value="{{sellerContact.wechatId}}">å¤åˆ¶</text>
      </view>
      <view wx:if="{{sellerContact.phone}}" class="contact-item">
        <text class="contact-label">æ‰‹æœºï¼š</text>
        <text class="contact-value">{{sellerContact.phone}}</text>
        <text class="copy-btn" bindtap="copyContact" data-type="phone" data-value="{{sellerContact.phone}}">å¤åˆ¶</text>
      </view>
      <view wx:if="{{sellerContact.email}}" class="contact-item">
        <text class="contact-label">é‚®ç®±ï¼š</text>
        <text class="contact-value">{{sellerContact.email}}</text>
        <text class="copy-btn" bindtap="copyContact" data-type="email" data-value="{{sellerContact.email}}">å¤åˆ¶</text>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨æ“ä½œæ ï¼ˆå›ºå®šï¼‰ -->
  <view class="bottom-bar">
    <view wx:if="{{!isMyProduct}}" class="bar-action" catchtap="toggleFavorite">
      <text class="action-icon">{{isFavorited ? 'â¤ï¸' : 'ğŸ¤'}}</text>
      <text class="action-text">{{isFavorited ? 'å·²æ”¶è—' : 'æ”¶è—'}}</text>
    </view>
    <button wx:if="{{false}}" class="bar-action share-btn" open-type="share">
      <text class="action-icon">ğŸ“¤</text>
      <text class="action-text">åˆ†äº«</text>
    </button>
    <button wx:if="{{!isMyProduct}}" class="bar-btn chat" bindtap="onChat" hover-class="bar-btn-hover">èŠä¸€èŠ</button>
    <button wx:if="{{isMyProduct}}" class="bar-btn edit" bindtap="goEdit" hover-class="bar-btn-hover">ç¼–è¾‘å•†å“</button>
    <!-- éšè—"æˆ‘æƒ³è¦"æŒ‰é’® -->
    <!-- <button wx:if="{{!isMyProduct}}" class="bar-btn buy" bindtap="onBuy" hover-class="bar-btn-hover">æˆ‘æƒ³è¦</button> -->
  </view>
</view>

