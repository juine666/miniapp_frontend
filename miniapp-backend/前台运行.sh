#!/bin/bash
# 前台运行后端服务，方便查看控制台日志和错误

cd "$(dirname "$0")"

echo "=================================="
echo "  后端服务 - 前台运行模式"
echo "=================================="
echo "  端口: 8081"
echo "  日志: 同时输出到控制台和文件"
echo "  按 Ctrl+C 停止服务"
echo "=================================="
echo ""

# 先停止可能正在运行的实例
echo "检查并停止旧实例..."
lsof -ti:8081 | xargs kill -9 2>/dev/null || echo "没有运行中的实例"
sleep 2

echo "启动服务..."
echo ""

# 前台运行，可以看到所有日志和错误
./gradlew bootRun -x test

